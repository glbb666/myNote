### 从项目开始写到完成经历了什么

先进行需求分析，通过需求分析看看软件的需要什么功能，如何实现这些功能比较合适，然后进行软件的总体结构设计和[模块设计](https://baike.baidu.com/item/模块设计/4815800)，看看需要哪些模块，模块之间的关系是什么，可不可以进行代码复用，然后就是编码和调试、程序联调和测试。

- 对项目进行构思，分功能模块，根据模块写组件，配置路由以及子路由。比如登陆注册找回密码，就是通过子路由进行局部组件的切换。周报系统内部页面，也是根据子路由进行，周报，同事，个人中心这些模块的切换。

- 代码的复用，有一些比较通用的`JS`函数，比如日期转换，为了降低耦合度，我就会专门拿一个`command.js`把它们封装在一起，在需要的时候调用。

- 写完项目让大家对他进行测试，比如暴力输入，重复用户名之类的，然后不断地`debug`进行完善。

- `vue-cli`脚手架

  ![祖传代码图](images/16163c795a75635a)
### `cookie`和`session`如何实现登陆注册

- 前端登陆
- 后台验证成功后把前端的状态信息，比如存在`session`里，并把`session_id`设置前端的`cookie`里
- 只要这个`cookie`没有被清除或过期，前端每一次请求都会带上这个`cookie`，后台会根据这个`session_id`找出相应的用户
- 我们可以在`session`里设置时间戳，每一次前端发起请求都会对这个时间戳进行更新，这样我们就可以设置超时掉线了。

### `token`呢

用户把用户名和密码发给后端，后端验证后用一系列算法加密后发给前端，前端设置把它设置在`localStorage`中，在之后的每一次请求中都要带上`token`，服务器收到`token`进行解密和签名认证，判断其有效性。

### `canvas`图片压缩过程

- 类型为的`input[file]`标签上传图片
- 用`FileReader`的`readAsDataURL`读取图片`URI`，是一个`base64`的字符串
- 创造一个空图片对象，把它的`src`设置为这个`URI`
- 这个图片对象的`load`回调中，创建一块`canvas`画布，把图片对象的原宽高按一定的比例进行转换成压缩后的宽高。
- 用`context.drawImage(image, x, y, width, height)`将图片进行压缩后画到画布上
- `canvas.toBlob`压缩后的图片转换成`blob`对象进行上传

### 导航守卫进行权限管理

- 登录和未登录状态

- 管理员和非管理员身份

  都是利用路由元编程，在路由的表里的meta属性中设置了状态以及身份，但是登录和未登录，因为是分的两个大模块，所以我是在全局导航守卫中用`beforeEach`进行了管理，如果没登录，是不能进入周报界面，就算输入`url`，也会进行一个重定向，如果登录了，也不能再去登录一次，如果要强行进入登陆界面，也会被重定向到周报界面。

  而管理员和非管理员身份，其实就是少许功能模块，所以我们只需要在`route表`里面进行路由守卫的配置`beforeEnter`即可

 ### 如何使用中间件

- `npm`下载
- `require`引入
- `express.use()`

### 在什么情况下使用到`vuex`，用`vuex`管理了什么数据

贯穿全局的，组件间需要共享的，即时更新的数据。当时我发现使用`alert`会造成页面的阻塞，并且十分的不美观，所以我自己手动实现了一个`alert`弹框，我把它放在整个页面的上方，就是`app.vue`，设置了隐藏。它可以在全局中进行使用，当需要弹框的时候，我就对弹框对象的信息`dispatch`到`actions`中，再通过`actions`进行`commit`到`mutiations`中，在`mutiations`中进行状态的改变。在`app.vue`中我把`vuex`中的弹框数据作为`computed`数据的依赖，当`vuex`的数据发生改变，`computed`就会进行一个重新的计算。

### ![项目中进行了哪些优化]()

用户方面：`loading`动画，提升用户体验

代码方面：把代码提取到公用模块`esmodule`上，进行了代码复用

图片方面：`canvas`进行了图片的压缩。



