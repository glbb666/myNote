### 网络体系结构

![计算机网络模型](https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/7/30/1739d1d409e3174b~tplv-t2oaga2asx-zoom-in-crop-mark:1512:0:0:0.awebp)

#### osi七层体系结构

国际化标准组织定义，不考虑成本问题，兼顾各个厂家各个应用的需求。因为太复杂，没有厂家使用，成为理论上的标准。

##### TCP/IP四层协议

网络事实上的标准

1. **应用层**
   * 应用层协议定义了运行于不同终端上的应用程序如何进行通信，以及如何进行数据交换。
   * 它提供了一个用户接口，使得用户能够使用网络服务，如电子邮件、文件传输和Web浏览。
2. **传输层**
   * 传输层的主要任务是提供端到端的数据传输服务，并且确保这种传输是可靠的。
   * 这一层使用TCP（传输控制协议）来提供面向连接、可靠的数据传输服务（如按正确顺序传输数据、数据错误检测和重传等特性）。
   * 对于不需要可靠传输的应用，传输层也可以使用UDP（用户数据报协议），它提供一种无连接的数据传输服务，但不保证数据的顺序、完整性或重传。
   * 传输层解决如何在网络繁忙时控制数据流速，避免网络拥塞。
3. **网络层**
   * 负责将数据包从源主机传输到目的主机，通过IP寻址和路由，以实现跨网段的通信。
   * IP协议提供的是一种不可靠服务，它只负责数据包的传送，不保证数据包的顺序、数据的完整性或防止数据的丢失。
4. **链路层**
   * 这一层负责处理与实际网络硬件和介质的接口细节，涉及数据在物理网络中的传输。
   * 它定义了如何通过网络介质（如电缆、光纤等）进行数据的物理传输，并处理比特流的封装和解封装。
   * 这一层包括了Ethernet（以太网协议）、PPP（点对点协议）等多种技术标准。
   * 它还负责数据的编码、解码、信号强度调节和噪音管理等任务。

**为什么TCP报文通常被封装在IP数据包中进行传输？**

1. **符合TCP/IP协议**：TCP位于传输层，而IP位于网络层。根据分层的原则，每一层只完成该层的功能，并为上一层提供服务。
2. **IP负责寻址和路由** ：IP协议负责将数据包从源主机送达目的主机。它使用IP地址来标识网络上的每一台主机，并通过路由算法找到从源到目的地的最佳路径。
3. **TCP负责可靠性和流控制** ：TCP提供了错误检测、数据包顺序控制、重传机制等功能，确保了数据的完整性和顺序性。这一切都是在IP提供的不可靠、无连接的服务之上实现的。
4. **效率和灵活性** ：封装机制允许不同的传输层协议（如TCP和UDP）复用同一个网络层协议，共享网络设施和资源。

#### 水平协议和垂直服务

**对等层实体**：两个端之间的相同层

**相邻层实体**：同一个端系统中相邻的层

**协议的通信**：对等层实体的通信

**服务**：相邻层实体的访问，低层为高层提供服务

**协议访问的一方：**服务的消费者

**协议被访问的一方：**服务的提供者

> 协议的调用不建议跨层。协议只能在本端系统中调用（协议是函数，计算机网络的端系统是自治的）。

![1CBB3534863FDEFA764FE741BF537B0F](images/1CBB3534863FDEFA764FE741BF537B0F.jpg)

### 网络协议

为进行网络中的数据交换而建立的规则，标准或约定称为网络协议

#### 网络协议三要素

- 语法：数据与控制信息的结构和格式
- 语义：发出何种信息，完成何种动作以及做出何种响应
- 定时：事件实现顺序的详细说明

`<font color='red'>`网络系统的数据通信由协议来支撑`</font>`

### 分层

优点：

- 简化系统设计
- 模块易于维护
- 系统的更新成本和效率

缺点：

- 信息冗余，降低性能
- 层次的划分难以确定
- 协议首部越来越大

#### 分层要点

- 网络功能模块化，取出不同网络应用之间以及网络应用与网络技术之间的紧密耦合，让层和层之间透明（互相不关联，松耦合）
- 端到端原则，把关键功能作为模块独立

### 参考

[搞定计算机网络面试，看这篇就够了](https://juejin.im/post/5b5f20686fb9a04f844adbdd)
