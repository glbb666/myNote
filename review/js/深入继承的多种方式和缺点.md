## 1.åŸå‹é“¾ç»§æ‰¿

åšæ³•ï¼šçˆ¶ç±»å®ä¾‹ä½œä¸ºå­ç±»åŸå‹ï¼Œæ–¹æ³•å†™åœ¨çˆ¶ç±»åŸå‹ä¸Š

ç¼ºç‚¹ï¼šå­ç±»å®ä¾‹å…±äº«å¼•ç”¨ç±»å‹ï¼Œå­ç±»ä¸å¯å‘çˆ¶ç±»ä¼ å‚

```javascript
function Parent () {
    this.name = 'kevin';
}

Parent.prototype.getName = function () {
    console.log(this.name);
}

function Child () {

}

Child.prototype = new Parent();

var child1 = new Child();

console.log(child1.getName()) // kevin
```

ç¼ºç‚¹ï¼š

1.**å¼•ç”¨ç±»å‹çš„å±æ€§**è¢«æ‰€æœ‰å®ä¾‹å…±äº«ï¼Œä¸¾ä¸ªä¾‹å­ï¼š

```javascript
function Parent () {
    this.names = ['kevin', 'daisy'];
}

function Child () {

}

Child.prototype = new Parent();

var child1 = new Child();

child1.names.push('yayu');

console.log(child1.names); // ["kevin", "daisy", "yayu"]

var child2 = new Child();

console.log(child2.names); // ["kevin", "daisy", "yayu"]
```

2.åœ¨åˆ›å»º Child çš„å®ä¾‹æ—¶ï¼Œä¸èƒ½å‘Parentä¼ å‚

## 2.å€Ÿç”¨æ„é€ å‡½æ•°(ç»å…¸ç»§æ‰¿)

åšæ³•ï¼šå­ç±»è°ƒç”¨çˆ¶ç±»

ä¼˜ç‚¹ï¼šåŸå‹é“¾æ¨¡å¼çš„ç¼ºç‚¹ï¼ˆ1ã€å¼•ç”¨ç±»å‹ä¸è¢«å®ä¾‹å…±äº«2ã€å­ç±»å¯å‘çˆ¶ç±»ä¼ å‚ï¼‰

ç¼ºç‚¹ï¼šæ–¹æ³•éƒ½åœ¨æ„é€ å‡½æ•°ä¸­å®šä¹‰ï¼Œæ¯æ¬¡åˆ›å»ºå®ä¾‹éƒ½ä¼šåˆ›å»ºä¸€éæ–¹æ³•ã€‚

```javascript
function Parent () {
    this.names = ['kevin', 'daisy'];
}

function Child () {
    Parent.call(this);
}

var child1 = new Child();

child1.names.push('yayu');

console.log(child1.names); // ["kevin", "daisy", "yayu"]

var child2 = new Child();

console.log(child2.names); // ["kevin", "daisy"]
```

ä¸¾ä¸ªä¾‹å­ï¼š

```javascript
function Parent (name) {
    this.name = name;
}

function Child (name) {
    Parent.call(this, name);
}

var child1 = new Child('kevin');

console.log(child1.name); // kevin

var child2 = new Child('daisy');

console.log(child2.name); // daisy
```



## 3.ç»„åˆç»§æ‰¿

åŸå‹é“¾ç»§æ‰¿å’Œç»å…¸ç»§æ‰¿åŒå‰‘åˆç’§ã€‚

åšæ³•ï¼š1.çˆ¶ç±»å®ä¾‹ä½œä¸ºå­ç±»åŸå‹ï¼Œæ–¹æ³•å†™åœ¨çˆ¶ç±»åŸå‹ä¸Š2.å­ç±»è°ƒç”¨çˆ¶ç±»

ä¼˜ç‚¹ï¼šèåˆåŸå‹é“¾ç»§æ‰¿å’Œæ„é€ å‡½æ•°çš„ä¼˜ç‚¹ï¼Œæ˜¯ JavaScript ä¸­**æœ€å¸¸ç”¨çš„ç»§æ‰¿æ¨¡å¼**ã€‚

ç¼ºç‚¹ï¼šçˆ¶ç±»è°ƒç”¨ä¸¤è¾¹ï¼Œå­ç±»åŸå‹æœ‰å†—ä½™å±æ€§

```javascript
function Parent (name) {
    this.name = name;
    this.colors = ['red', 'blue', 'green'];
}

Parent.prototype.getName = function () {
    console.log(this.name)
}

function Child (name, age) {

    Parent.call(this, name);
    
    this.age = age;

}

Child.prototype = new Parent();
Child.prototype.constructor = Child;

var child1 = new Child('kevin', '18');

child1.colors.push('black');

console.log(child1.name); // kevin
console.log(child1.age); // 18
console.log(child1.colors); // ["red", "blue", "green", "black"]

var child2 = new Child('daisy', '20');

console.log(child2.name); // daisy
console.log(child2.age); // 20
console.log(child2.colors); // ["red", "blue", "green"]
```



## 4.åŸå‹å¼ç»§æ‰¿

ä½œç”¨ï¼šåŸºäºåŸæœ‰çš„å¯¹è±¡åˆ›é€ æ–°å¯¹è±¡

```javascript
function createObj(o) {
    function F(){}
    F.prototype = o;
    return new F();
}
```

å°±æ˜¯ ES5 Object.create çš„æ¨¡æ‹Ÿå®ç°ï¼Œå°†ä¼ å…¥çš„å¯¹è±¡ä½œä¸ºåˆ›å»ºçš„å¯¹è±¡çš„åŸå‹ã€‚

ç¼ºç‚¹ï¼š

åŒ…å«å¼•ç”¨ç±»å‹çš„å±æ€§å€¼å§‹ç»ˆéƒ½ä¼šå…±äº«ç›¸åº”çš„å€¼ï¼Œè¿™ç‚¹è·ŸåŸå‹é“¾ç»§æ‰¿ä¸€æ ·ã€‚

```javascript
var person = {
    name: 'kevin',
    friends: ['daisy', 'kelly']
}

var person1 = createObj(person);
var person2 = createObj(person);

person1.name = 'person1';
console.log(person2.name); // kevin

person1.firends.push('taylor');
console.log(person2.friends); // ["daisy", "kelly", "taylor"]
```

æ³¨æ„ï¼šä¿®æ”¹`person1.name`çš„å€¼ï¼Œ`person2.name`çš„å€¼å¹¶æœªå‘ç”Ÿæ”¹å˜ï¼Œå¹¶ä¸æ˜¯å› ä¸º`person1`å’Œ`person2`æœ‰ç‹¬ç«‹çš„ name å€¼ï¼Œè€Œæ˜¯å› ä¸º`person1.name = 'person1'`ï¼Œç»™`person1`æ·»åŠ äº† name å€¼ï¼Œå¹¶éä¿®æ”¹äº†åŸå‹ä¸Šçš„ name å€¼ã€‚

## 5. å¯„ç”Ÿå¼ç»§æ‰¿

ä½œç”¨ï¼šå¢å¼ºå¯¹è±¡

åšæ³•ï¼š1.åŸºäºåŸæœ‰çš„å¯¹è±¡åˆ›é€ æ–°å¯¹è±¡2.ç»™æ–°å¯¹è±¡æ·»åŠ æ–¹æ³•

```javascript
function createObj (o) {
    var clone = Object.create(o);
    clone.sayName = function () {
        console.log('hi');
    }
    return clone;
}
```

ç¼ºç‚¹ï¼šè·Ÿå€Ÿç”¨æ„é€ å‡½æ•°æ¨¡å¼ä¸€æ ·ï¼Œæ¯æ¬¡åˆ›å»ºå¯¹è±¡éƒ½ä¼šåˆ›å»ºä¸€éæ–¹æ³•ã€‚

## 6. å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿

å¯„ç”Ÿç»„åˆç»§æ‰¿=åŸå‹å¼ç»§æ‰¿+ç»„åˆå¼ç»§æ‰¿

ç›®çš„ï¼šä¸ºäº†è§£å†³ç»„åˆç»§æ‰¿ä¸­çˆ¶ç±»è¢«è°ƒç”¨ä¸¤æ¬¡(1.åœ¨å­ç±»ä¸­è°ƒç”¨çˆ¶ç±»2.æŠŠçˆ¶ç±»å®ä¾‹ä½œä¸ºå­ç±»åŸå‹)

æƒ³æ³•ï¼šå…¶å®æˆ‘ä»¬æƒ³è¦çš„åªæ˜¯çˆ¶ç±»çš„åŸå‹ä¸Šçš„æ–¹æ³•

åšæ³•ï¼šç”¨å¯„ç”Ÿå¼ç»§æ‰¿å¯¹ç»„åˆç»§æ‰¿è¿›è¡Œä¼˜åŒ–(åˆ›å»ºçˆ¶ç±»å’Œå­ç±»çš„ä¸­é—´å±‚)

ä¸ºäº†æ–¹ä¾¿å¤§å®¶é˜…è¯»ï¼Œåœ¨è¿™é‡Œé‡å¤ä¸€ä¸‹ç»„åˆç»§æ‰¿çš„ä»£ç ï¼š

```javascript
function Parent (name) {
    this.name = name;
    this.colors = ['red', 'blue', 'green'];
}

Parent.prototype.getName = function () {
    console.log(this.name)
}

function Child (name, age) {
    Parent.call(this, name);
    this.age = age;
}

Child.prototype = new Parent();

var child1 = new Child('kevin', '18');

console.log(child1)
```

ç»„åˆç»§æ‰¿æœ€å¤§çš„ç¼ºç‚¹æ˜¯ä¼šè°ƒç”¨ä¸¤æ¬¡çˆ¶æ„é€ å‡½æ•°ã€‚

ç¬¬ä¸€æ¬¡æ˜¯è®¾ç½®å­ç±»å‹å®ä¾‹çš„åŸå‹çš„æ—¶å€™ï¼š

```javascript
Child.prototype = new Parent();
```

ç¬¬äºŒæ¬¡åœ¨åˆ›å»ºå­ç±»å‹å®ä¾‹çš„æ—¶å€™ï¼š

```javascript
var child1 = new Child('kevin', '18');
```

å›æƒ³ä¸‹ new çš„æ¨¡æ‹Ÿå®ç°ï¼Œå…¶å®ç¬¬ä¸€æ¬¡ä¸­ï¼Œæˆ‘ä»¬ä¼šæ‰§è¡Œï¼š

```javascript
Parent.call(this, name);
```

æ‰€ä»¥ï¼Œå¦‚æœæˆ‘ä»¬æ‰“å° child1 å¯¹è±¡ï¼Œæˆ‘ä»¬ä¼šå‘ç° Child.prototype å’Œ child1 éƒ½æœ‰ä¸€ä¸ªå±æ€§ä¸º`colors`ï¼Œå±æ€§å€¼ä¸º`['red', 'blue', 'green']`ã€‚

ä¸ºäº†é¿å…è¿™ä¸€æ¬¡é‡å¤è°ƒç”¨ï¼Œæˆ‘ä»¬ä¸ä½¿ç”¨ Child.prototype = new Parent() ï¼Œè€Œæ˜¯é—´æ¥çš„è®© Child.prototype è®¿é—®åˆ° Parent.prototype

çœ‹çœ‹å¦‚ä½•å®ç°ï¼š

```javascript
function Parent (name) {
    this.name = name;
    this.colors = ['red', 'blue', 'green'];
}

Parent.prototype.getName = function () {
    console.log(this.name)
}

function Child (name, age) {
    Parent.call(this, name);
    this.age = age;
}

// å…³é”®çš„ä¸‰æ­¥
var F = function () {};

F.prototype = Parent.prototype;

Child.prototype = new F();


var child1 = new Child('kevin', '18');

console.log(child1);
```

æœ€åæˆ‘ä»¬å°è£…ä¸€ä¸‹è¿™ä¸ªç»§æ‰¿æ–¹æ³•ï¼š

```javascript
function object(o) {
    function F() {}
    F.prototype = o;
    return new F();
}

function prototype(child, parent) {
    var prototype = object(parent.prototype);
    prototype.constructor = child;
    child.prototype = prototype;
}

// å½“æˆ‘ä»¬ä½¿ç”¨çš„æ—¶å€™ï¼š
prototype(Child, Parent);
```

å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿åªè°ƒç”¨äº†ä¸€æ¬¡ Parent æ„é€ å‡½æ•°ï¼Œå¹¶ä¸”å› æ­¤**é¿å…äº†åœ¨ Parent.prototype ä¸Šé¢åˆ›å»ºå¤šä½™çš„å±æ€§**ã€‚ä¸æ­¤åŒæ—¶ï¼ŒåŸå‹é“¾è¿˜èƒ½ä¿æŒä¸å˜ï¼›å› æ­¤ï¼Œè¿˜èƒ½å¤Ÿæ­£å¸¸ä½¿ç”¨ instanceof å’Œ isPrototypeOfã€‚å¼€å‘äººå‘˜æ™®éè®¤ä¸ºå¯„ç”Ÿç»„åˆå¼ç»§æ‰¿æ˜¯å¼•ç”¨ç±»å‹æœ€ç†æƒ³çš„ç»§æ‰¿èŒƒå¼ã€‚

## 7. Classçš„ç»§æ‰¿
### ç®€ä»‹
åšæ³•ï¼šClass å¯ä»¥é€šè¿‡`extends`å…³é”®å­—å®ç°ç»§æ‰¿

```javascript
class Point {
}
class ColorPoint extends Point {
  constructor(x, y, color) {
    super(x, y); // è°ƒç”¨çˆ¶ç±»çš„constructor(x, y)
    this.color = color;
  }

  toString() {
    return this.color + ' ' + super.toString(); // è°ƒç”¨çˆ¶ç±»çš„toString()
  }
}
```

**å­ç±»å¿…é¡»åœ¨`constructor`æ–¹æ³•ä¸­è°ƒç”¨`super`æ–¹æ³•(çˆ¶ç±»çš„æ„é€ å‡½æ•°)**ï¼Œå¦åˆ™æ–°å»ºå®ä¾‹æ—¶ä¼šæŠ¥é”™ã€‚è¿™æ˜¯å› ä¸ºå­ç±»è‡ªå·±çš„`this`å¯¹è±¡ï¼Œå¿…é¡»å…ˆé€šè¿‡çˆ¶ç±»çš„æ„é€ å‡½æ•°å®Œæˆå¡‘é€ ï¼Œå¾—åˆ°ä¸çˆ¶ç±»åŒæ ·çš„å®ä¾‹å±æ€§å’Œæ–¹æ³•ï¼Œç„¶åå†å¯¹å…¶è¿›è¡ŒåŠ å·¥ï¼ŒåŠ ä¸Šå­ç±»è‡ªå·±çš„å®ä¾‹å±æ€§å’Œæ–¹æ³•ã€‚å¦‚æœä¸è°ƒç”¨`super`æ–¹æ³•ï¼Œå­ç±»å°±å¾—ä¸åˆ°`this`å¯¹è±¡ã€‚

```
å­ç±»this = çˆ¶ç±»å¡‘é€ +å­ç±»å¡‘é€ 
```

å¦‚æœå­ç±»æ²¡æœ‰å®šä¹‰`constructor`æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šè¢«**é»˜è®¤æ·»åŠ **

```javascript
class ColorPoint extends Point {
}

// ç­‰åŒäº
class ColorPoint extends Point {
  constructor(...args) {
    super(...args);
  }
}
```

**åœ¨å­ç±»çš„æ„é€ å‡½æ•°ä¸­ï¼Œåªæœ‰è°ƒç”¨`super`ä¹‹åï¼Œæ‰å¯ä»¥ä½¿ç”¨`this`å…³é”®å­—**ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚è¿™æ˜¯å› ä¸ºå­ç±»å®ä¾‹çš„æ„å»ºï¼ŒåŸºäºçˆ¶ç±»å®ä¾‹ï¼Œåªæœ‰`super`æ–¹æ³•æ‰èƒ½è°ƒç”¨çˆ¶ç±»å®ä¾‹ã€‚

**å­ç±»ä¼šç»§æ‰¿çˆ¶ç±»çš„é™æ€æ–¹æ³•**

```javascript
class A {
  static hello() {
    console.log('hello world');
  }
}

class B extends A {
}

B.hello()  // hello world
```

### Object.getPrototypeOf()

`Object.getPrototypeOf`æ–¹æ³•å¯ä»¥ç”¨æ¥ä»å­ç±»ä¸Šè·å–çˆ¶ç±»

```javascript
Object.getPrototypeOf(ColorPoint) === Point
// true
```

å› æ­¤ï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ªæ–¹æ³•åˆ¤æ–­ï¼Œä¸€ä¸ªç±»æ˜¯å¦ç»§æ‰¿äº†å¦ä¸€ä¸ªç±»

### super å…³é”®å­—

`super`è¿™ä¸ªå…³é”®å­—ï¼Œæ—¢å¯ä»¥å½“ä½œå‡½æ•°ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥å½“ä½œå¯¹è±¡ä½¿ç”¨ã€‚

#### å½“ä½œå‡½æ•°ä½¿ç”¨

1. `super`ä½œä¸ºå‡½æ•°è°ƒç”¨æ—¶ï¼Œä»£è¡¨**çˆ¶ç±»çš„æ„é€ å‡½æ•°**ï¼ŒES6 è¦æ±‚ï¼Œå­ç±»çš„æ„é€ å‡½æ•°å¿…é¡»æ‰§è¡Œä¸€æ¬¡`super`å‡½æ•°

```javascript
class A {}
class B extends A {
  constructor() {
    super();
  }
}
```

2. æ³¨æ„ï¼Œ<font color='red'>`super`è™½ç„¶ä»£è¡¨äº†çˆ¶ç±»`A`çš„æ„é€ å‡½æ•°ï¼Œä½†æ˜¯è¿”å›çš„æ˜¯å­ç±»`B`çš„å®ä¾‹ï¼Œå³`super`å†…éƒ¨çš„`this`æŒ‡çš„æ˜¯`B`çš„å®ä¾‹</font>ï¼Œå› æ­¤`super()`åœ¨è¿™é‡Œç›¸å½“äº`A.prototype.constructor.call(this)`ã€‚

```javascript
class A {
  constructor() {
    console.log(new.target.name);
  }
}
class B extends A {
  constructor() {
    super();
  }
}
new A() // A
new B() // B
```

ä¸Šé¢ä»£ç ä¸­ï¼Œ`new.target`æŒ‡å‘å½“å‰æ­£åœ¨æ‰§è¡Œçš„å‡½æ•°ã€‚å¯ä»¥çœ‹åˆ°ï¼Œåœ¨`super()`æ‰§è¡Œæ—¶ï¼Œå®ƒæŒ‡å‘çš„æ˜¯å­ç±»`B`çš„æ„é€ å‡½æ•°ï¼Œè€Œä¸æ˜¯çˆ¶ç±»`A`çš„æ„é€ å‡½æ•°ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ`super()`å†…éƒ¨çš„`this`æŒ‡å‘çš„æ˜¯`B``

3. `super()`**åªèƒ½ç”¨åœ¨å­ç±»çš„æ„é€ å‡½æ•°**ä¹‹ä¸­

#### å½“ä½œå¯¹è±¡ä½¿ç”¨

1. åœ¨**æ™®é€šæ–¹æ³•ï¼ˆåŒ…æ‹¬constructorï¼‰**ä¸­ï¼ŒæŒ‡å‘**çˆ¶ç±»çš„åŸå‹å¯¹è±¡**ï¼›åœ¨**é™æ€æ–¹æ³•**ä¸­ï¼ŒæŒ‡å‘**çˆ¶ç±»**ã€‚

   ğŸ’¥æ³¨æ„ï¼Œåœ¨æ™®é€šæ–¹æ³•ä¸­ï¼Œç”±äº`super`æŒ‡å‘çˆ¶ç±»çš„åŸå‹å¯¹è±¡ï¼Œæ‰€ä»¥<font color='red'>å®šä¹‰åœ¨çˆ¶ç±»å®ä¾‹ä¸Šçš„æ–¹æ³•æˆ–å±æ€§ï¼Œæ˜¯æ— æ³•é€šè¿‡`super`è°ƒç”¨çš„</font>

   ```javascript
   class A {
     constructor() {
       this.p = 2;
     }
   }
   A.prototype.x = 2;
   class B extends A {
     getValue () {
       console.log(super.p,super.x)
     }
   }
   
   let b = new B();
   b.getValue() // undefined 2
   ```

   ä¸Šé¢ä»£ç ä¸­ï¼Œ`p`æ˜¯çˆ¶ç±»`A`å®ä¾‹çš„å±æ€§ï¼Œxæ˜¯çˆ¶ç±»`A`åŸå‹çš„å±æ€§ï¼Œå¯ä»¥çœ‹å‡ºsuperåªèƒ½å¼•ç”¨åŸå‹ä¸Šçš„å±æ€§
   
2. åœ¨æ™®é€šæ–¹æ³•ä¸­é€šè¿‡`super`è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•æ—¶ï¼Œ**<font color='red'>çˆ¶ç±»æ–¹æ³•å†…éƒ¨</font>çš„`this`æŒ‡å‘å½“å‰çš„å­ç±»å®ä¾‹**

   ğŸ’¥æ³¨æ„ï¼šç”±äº`this`æŒ‡å‘å­ç±»å®ä¾‹ï¼Œæ‰€ä»¥<font color='red'>å¦‚æœé€šè¿‡`super`å¯¹æŸä¸ªå±æ€§èµ‹å€¼</font>ï¼Œè¿™æ—¶`super`å°±æ˜¯`this`ï¼Œ<font color='red'>èµ‹å€¼çš„å±æ€§ä¼šå˜æˆå­ç±»å®ä¾‹çš„å±æ€§</font>

```javascript
class A {
  constructor() {
    this.x = 1;
  }
}

class B extends A {
  constructor() {
    super();
    this.x = 2;
    super.x = 3;
    console.log(super.x); // undefined
    console.log(this.x); // 3
  }
}

let b = new B();
```

ä¸Šé¢ä»£ç ä¸­ï¼Œ`super.x`èµ‹å€¼ä¸º`3`ï¼Œè¿™æ—¶ç­‰åŒäºå¯¹`this.x`èµ‹å€¼ä¸º`3`ã€‚è€Œå½“è¯»å–`super.x`çš„æ—¶å€™ï¼Œè¯»çš„æ˜¯`A.prototype.x`ï¼Œæ‰€ä»¥è¿”å›`undefined`ã€‚

ğŸˆæ‰€ä»¥å¯ä»¥æ€»ç»“å¾—å‡ºï¼Œå½“æŠŠsuperä½œä¸ºå¯¹è±¡ä½¿ç”¨æ—¶ï¼š

- ç›´æ¥ä½¿ç”¨super

å–å€¼ï¼šåœ¨é™æ€æ–¹æ³•ä¸­æŒ‡å‘çˆ¶ç±»ï¼Œåœ¨åŠ¨æ€æ–¹æ³•ä¸­æŒ‡å‘çˆ¶ç±»å®ä¾‹

èµ‹å€¼ï¼šåœ¨é™æ€æ–¹æ³•ä¸­æŒ‡å‘å­ç±»ï¼Œåœ¨åŠ¨æ€æ–¹æ³•ä¸­æŒ‡å‘å­ç±»å®ä¾‹

- ç”¨superè°ƒç”¨çˆ¶ç±»æ–¹æ³•ï¼Œçˆ¶ç±»æ–¹æ³•å†…éƒ¨thisçš„æŒ‡å‘

åœ¨é™æ€æ–¹æ³•ä¸­æŒ‡å‘å­ç±»ï¼Œåœ¨åŠ¨æ€æ–¹æ³•ä¸­æŒ‡å‘å­ç±»å®ä¾‹

### æ³¨æ„ï¼Œä½¿ç”¨`super`çš„æ—¶å€™ï¼Œå¿…é¡»æ˜¾å¼æŒ‡å®šæ˜¯ä½œä¸ºå‡½æ•°ã€è¿˜æ˜¯ä½œä¸ºå¯¹è±¡ä½¿ç”¨ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚

```javascript
class A {}

class B extends A {
  constructor() {
    super();
    console.log(super); // æŠ¥é”™
  }
}
```

ä¸Šé¢ä»£ç ä¸­ï¼Œ`console.log(super)`å½“ä¸­çš„`super`ï¼Œæ— æ³•çœ‹å‡ºæ˜¯ä½œä¸ºå‡½æ•°ä½¿ç”¨ï¼Œè¿˜æ˜¯ä½œä¸ºå¯¹è±¡ä½¿ç”¨ï¼Œæ‰€ä»¥ JavaScript å¼•æ“è§£æä»£ç çš„æ—¶å€™å°±ä¼šæŠ¥é”™ã€‚è¿™æ—¶ï¼Œå¦‚æœèƒ½æ¸…æ™°åœ°è¡¨æ˜`super`çš„æ•°æ®ç±»å‹ï¼Œå°±ä¸ä¼šæŠ¥é”™ã€‚

```javascript
class A {}

class B extends A {
  constructor() {
    super();
    console.log(super.valueOf() instanceof B); // true
  }
}

let b = new B();
```

ä¸Šé¢ä»£ç ä¸­ï¼Œ`super.valueOf()`è¡¨æ˜`super`æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå› æ­¤å°±ä¸ä¼šæŠ¥é”™ã€‚åŒæ—¶ï¼Œç”±äº`super`ä½¿å¾—`this`æŒ‡å‘`B`çš„å®ä¾‹ï¼Œæ‰€ä»¥`super.valueOf()`è¿”å›çš„æ˜¯ä¸€ä¸ª`B`çš„å®ä¾‹ã€‚

æœ€åï¼Œç”±äºå¯¹è±¡æ€»æ˜¯ç»§æ‰¿å…¶ä»–å¯¹è±¡çš„ï¼Œæ‰€ä»¥å¯ä»¥åœ¨ä»»æ„ä¸€ä¸ªå¯¹è±¡ä¸­ï¼Œä½¿ç”¨`super`å…³é”®å­—ã€‚

```javascript
var obj = {
  toString() {
    return "MyObject: " + super.toString();
  }
};

obj.toString(); // MyObject: [object Object]
```

### ç±»çš„ prototype å±æ€§å’Œ__proto__å±æ€§ 

ClassåŒæ—¶æœ‰`prototype`å±æ€§å’Œ`__proto__`å±æ€§ï¼Œå› æ­¤åŒæ—¶å­˜åœ¨ä¸¤æ¡ç»§æ‰¿é“¾ã€‚

ï¼ˆ1ï¼‰å­ç±»çš„`__proto__`å±æ€§ï¼Œè¡¨ç¤ºæ„é€ å‡½æ•°çš„ç»§æ‰¿ï¼Œæ€»æ˜¯æŒ‡å‘çˆ¶ç±»ã€‚

ï¼ˆ2ï¼‰å­ç±»`prototype`å±æ€§çš„`__proto__`å±æ€§ï¼Œè¡¨ç¤ºæ–¹æ³•çš„ç»§æ‰¿ï¼Œæ€»æ˜¯æŒ‡å‘çˆ¶ç±»çš„`prototype`å±æ€§ã€‚

```javascript
class A {
}

class B extends A {
}

B.__proto__ === A // true
B.prototype.__proto__ === A.prototype // true
```

`extends`å…³é”®å­—åé¢å¯ä»¥è·Ÿå¤šç§ç±»å‹çš„å€¼ã€‚

```javascript
class B extends A {
}
```

ä¸Šé¢ä»£ç çš„`A`ï¼Œåªè¦æ˜¯ä¸€ä¸ªæœ‰`prototype`å±æ€§çš„å‡½æ•°ï¼Œå°±èƒ½è¢«`B`ç»§æ‰¿ã€‚ç”±äºå‡½æ•°éƒ½æœ‰`prototype`å±æ€§ï¼ˆé™¤äº†`Function.prototype`å‡½æ•°ï¼‰ï¼Œå› æ­¤`A`å¯ä»¥æ˜¯ä»»æ„å‡½æ•°ã€‚

ä¸‹é¢ï¼Œè®¨è®ºä¸¤ç§æƒ…å†µã€‚ç¬¬ä¸€ç§ï¼Œå­ç±»ç»§æ‰¿`Object`ç±»ã€‚

```javascript
class A extends Object {
}

A.__proto__ === Object // true
A.prototype.__proto__ === Object.prototype // true
```

è¿™ç§æƒ…å†µä¸‹ï¼Œ`A`å…¶å®å°±æ˜¯æ„é€ å‡½æ•°`Object`çš„å¤åˆ¶ï¼Œ`A`çš„å®ä¾‹å°±æ˜¯`Object`çš„å®ä¾‹ã€‚

ç¬¬äºŒç§æƒ…å†µï¼Œä¸å­˜åœ¨ä»»ä½•ç»§æ‰¿ã€‚

```javascript
class A {
}

A.__proto__ === Function.prototype // true
A.prototype.__proto__ === Object.prototype // true
```

### åŸç”Ÿæ„é€ å‡½æ•°çš„ç»§æ‰¿

åŸç”Ÿæ„é€ å‡½æ•°æ˜¯æŒ‡è¯­è¨€å†…ç½®çš„æ„é€ å‡½æ•°ï¼Œé€šå¸¸ç”¨æ¥ç”Ÿæˆæ•°æ®ç»“æ„ã€‚ECMAScript çš„åŸç”Ÿæ„é€ å‡½æ•°å¤§è‡´æœ‰ä¸‹é¢è¿™äº›ã€‚

- Boolean()
- Number()
- String()
- Array()
- Date()
- Function()
- RegExp()
- Error()
- Object()

ä»¥å‰ï¼Œè¿™äº›åŸç”Ÿæ„é€ å‡½æ•°æ˜¯æ— æ³•ç»§æ‰¿çš„ï¼Œæ¯”å¦‚ï¼Œä¸èƒ½è‡ªå·±å®šä¹‰ä¸€ä¸ª`Array`çš„å­ç±»ã€‚

```javascript
function MyArray() {
  Array.apply(this, arguments);
}

MyArray.prototype = Object.create(Array.prototype, {
  constructor: {
    value: MyArray,
    writable: true,
    configurable: true,
    enumerable: true
  }
});
```

ä¸Šé¢ä»£ç å®šä¹‰äº†ä¸€ä¸ªç»§æ‰¿ Array çš„`MyArray`ç±»ã€‚ä½†æ˜¯ï¼Œè¿™ä¸ªç±»çš„è¡Œä¸ºä¸`Array`å®Œå…¨ä¸ä¸€è‡´ã€‚

```javascript
var colors = new MyArray();
colors[0] = "red";
colors.length  // 0

colors.length = 0;
colors[0]  // "red"
```

ä¹‹æ‰€ä»¥ä¼šå‘ç”Ÿè¿™ç§æƒ…å†µï¼Œæ˜¯å› ä¸ºå­ç±»æ— æ³•è·å¾—åŸç”Ÿæ„é€ å‡½æ•°çš„å†…éƒ¨å±æ€§ï¼Œé€šè¿‡`Array.apply()`æˆ–è€…åˆ†é…ç»™åŸå‹å¯¹è±¡éƒ½ä¸è¡Œã€‚**åŸç”Ÿæ„é€ å‡½æ•°ä¼šå¿½ç•¥`apply`æ–¹æ³•ä¼ å…¥çš„`this`**ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒåŸç”Ÿæ„é€ å‡½æ•°çš„`this`æ— æ³•ç»‘å®šï¼Œå¯¼è‡´æ‹¿ä¸åˆ°å†…éƒ¨å±æ€§ã€‚

**ES5 æ˜¯å…ˆæ–°å»ºå­ç±»çš„å®ä¾‹å¯¹è±¡`this`ï¼Œå†å°†çˆ¶ç±»çš„å±æ€§æ·»åŠ åˆ°å­ç±»ä¸Š**ï¼Œç”±äºçˆ¶ç±»çš„å†…éƒ¨å±æ€§æ— æ³•è·å–ï¼Œå¯¼è‡´æ— æ³•ç»§æ‰¿ã€‚æ¯”å¦‚ï¼Œ`Array`æ„é€ å‡½æ•°æœ‰ä¸€ä¸ªå†…éƒ¨å±æ€§`[[DefineOwnProperty]]`ï¼Œç”¨æ¥å®šä¹‰æ–°å±æ€§æ—¶ï¼Œæ›´æ–°`length`å±æ€§ï¼Œè¿™ä¸ªå†…éƒ¨å±æ€§æ— æ³•åœ¨å­ç±»è·å–ï¼Œå¯¼è‡´å­ç±»çš„`length`å±æ€§è¡Œä¸ºä¸æ­£å¸¸ã€‚

ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æƒ³è®©ä¸€ä¸ªæ™®é€šå¯¹è±¡ç»§æ‰¿`Error`å¯¹è±¡ã€‚

```javascript
var e = {};

Object.getOwnPropertyNames(Error.call(e))
// [ 'stack' ]

Object.getOwnPropertyNames(e)
// []
```

ä¸Šé¢ä»£ç ä¸­ï¼Œæˆ‘ä»¬æƒ³é€šè¿‡`Error.call(e)`è¿™ç§å†™æ³•ï¼Œè®©æ™®é€šå¯¹è±¡`e`å…·æœ‰`Error`å¯¹è±¡çš„å®ä¾‹å±æ€§ã€‚ä½†æ˜¯ï¼Œ`Error.call()`å®Œå…¨å¿½ç•¥ä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªæ–°å¯¹è±¡ï¼Œ`e`æœ¬èº«æ²¡æœ‰ä»»ä½•å˜åŒ–ã€‚è¿™è¯æ˜äº†`Error.call(e)`è¿™ç§å†™æ³•ï¼Œæ— æ³•ç»§æ‰¿åŸç”Ÿæ„é€ å‡½æ•°ã€‚

ES6 å…è®¸ç»§æ‰¿åŸç”Ÿæ„é€ å‡½æ•°å®šä¹‰å­ç±»ï¼Œ**å› ä¸º ES6 æ˜¯å…ˆæ–°å»ºçˆ¶ç±»çš„å®ä¾‹å¯¹è±¡`this`ï¼Œç„¶åå†ç”¨å­ç±»çš„æ„é€ å‡½æ•°ä¿®é¥°`this`ï¼Œä½¿å¾—çˆ¶ç±»çš„æ‰€æœ‰è¡Œä¸ºéƒ½å¯ä»¥ç»§æ‰¿**ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç»§æ‰¿`Array`çš„ä¾‹å­ã€‚

```javascript
class MyArray extends Array {
  constructor(...args) {
    super(...args);
  }
}

var arr = new MyArray();
arr[0] = 12;
arr.length // 1

arr.length = 0;
arr[0] // undefined
```

ä¸Šé¢ä»£ç å®šä¹‰äº†ä¸€ä¸ª`MyArray`ç±»ï¼Œç»§æ‰¿äº†`Array`æ„é€ å‡½æ•°ï¼Œå› æ­¤å°±å¯ä»¥ä»`MyArray`ç”Ÿæˆæ•°ç»„çš„å®ä¾‹ã€‚è¿™æ„å‘³ç€ï¼ŒES6 å¯ä»¥è‡ªå®šä¹‰åŸç”Ÿæ•°æ®ç»“æ„ï¼ˆæ¯”å¦‚`Array`ã€`String`ç­‰ï¼‰çš„å­ç±»ï¼Œè¿™æ˜¯ ES5 æ— æ³•åšåˆ°çš„ã€‚

ä¸Šé¢è¿™ä¸ªä¾‹å­ä¹Ÿè¯´æ˜ï¼Œ`extends`å…³é”®å­—ä¸ä»…å¯ä»¥ç”¨æ¥ç»§æ‰¿ç±»ï¼Œè¿˜å¯ä»¥ç”¨æ¥ç»§æ‰¿åŸç”Ÿçš„æ„é€ å‡½æ•°ã€‚å› æ­¤å¯ä»¥åœ¨åŸç”Ÿæ•°æ®ç»“æ„çš„åŸºç¡€ä¸Šï¼Œå®šä¹‰è‡ªå·±çš„æ•°æ®ç»“æ„ã€‚

æ³¨æ„ï¼Œç»§æ‰¿`Object`çš„å­ç±»ï¼Œæœ‰ä¸€ä¸ª[è¡Œä¸ºå·®å¼‚](http://stackoverflow.com/questions/36203614/super-does-not-pass-arguments-when-instantiating-a-class-extended-from-object)ã€‚

```javascript
class NewObj extends Object{
  constructor(){
    super(...arguments);
  }
}
var o = new NewObj({attr: true});
o.attr === true  // false
```

ä¸Šé¢ä»£ç ä¸­ï¼Œ`NewObj`ç»§æ‰¿äº†`Object`ï¼Œä½†æ˜¯æ— æ³•é€šè¿‡`super`æ–¹æ³•å‘çˆ¶ç±»`Object`ä¼ å‚ã€‚è¿™æ˜¯å› ä¸º ES6 æ”¹å˜äº†`Object`æ„é€ å‡½æ•°çš„è¡Œä¸ºï¼Œ**ä¸€æ—¦å‘ç°`Object`æ–¹æ³•ä¸æ˜¯é€šè¿‡`new Object()`è¿™ç§å½¢å¼è°ƒç”¨ï¼ŒES6 è§„å®š`Object`æ„é€ å‡½æ•°ä¼šå¿½ç•¥å‚æ•°ã€‚**