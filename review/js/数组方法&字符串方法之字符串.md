# es5(3字符+4操作+4位置+3trim+4大小写+5模式匹配+1比较+3静态+1html)

## 字符方法（不改变字符串）

接受字符的索引
### es5
#### charAt(index)

返回：索引对应位置的字符
#### charCodeAt(index)

返回：索引对应位置的字符的编码

### es6

JS中（字符以 UTF-16 的格式储存）每个字符固定为`2`个字节。对于那些需要`4`个字节储存的字符（Unicode 码点大于`0xFFFF`的字符），JavaScript 会认为它们是两个字符。

#### codePointAt(index)

作用：能够正确处理 4 个字节储存的字符

返回：对应位置的字符码点的十进制值

`codePointAt()`方法返回的是码点的十进制值，如果想要十六进制的值，可以使用`toString()`方法转换一下。

```javascript
s.codePointAt(0).toString(16) // "20bb7"
s.codePointAt(2).toString(16) // "61"
```

你可能注意到了，`codePointAt()`方法的参数，仍然是不正确的。比如，上面代码中，字符`a`在字符串`s`的正确位置序号应该是 1，但是必须向`codePointAt()`方法传入 2。解决这个问题的一个办法是使用`for...of`循环，因为它会正确识别 32 位的 UTF-16 字符。

```javascript
let s = '𠮷a';
for (let ch of s) {
  console.log(ch.codePointAt(0).toString(16));
}
// 20bb7
// 61
```

另一种方法也可以，使用扩展运算符（`...`）进行展开运算。

```javascript
let arr = [...'𠮷a']; // arr.length === 2
arr.forEach(
  ch => console.log(ch.codePointAt(0).toString(16))
);
// 20bb7
// 61
```

`codePointAt()`方法是测试一个字符由两个字节还是由四个字节组成的最简单方法。

```javascript
function is32Bit(c) {
  return c.codePointAt(0) > 0xFFFF;
}

is32Bit("𠮷") // true
is32Bit("a") // false
```

### 操作方法（不改变字符串）

### concat(value1,value2...)

作用：接受多个参数，调用这些参数的toString()方法，并将返回的结果依次拼接在字符串的后面。

#### 下面的三个方法：

接受两个参数，第一个参数指定字符串的开始位置，第二个字符串表示子字符串到哪里结束。如果没有第二个参数，将字符串的末尾作为结束位置

返回：被操作字符串的一个子字符串

### slice(startIndex,endIndex)

第二个参数指定的是子字符串最后一个字符后一个位置的索引。当参数是负值，把负值和字符串长度相加

### substring(startIndex,endIndex)

第二个参数指定的是子字符串最后一个字符后一个位置的索引。当参数是负值，转换为0。

<font color='red'>注意:substring会把两个参数中较小的作为开始位置，较大的作为结束位置。substring(3,0)等同于substring(0,3)</font>

### substr(startIndex,endIndex)

第二个参数指定的是返回的字符个数。当负值是第一个参数，把它加上字符串长度，是第二个参数，把它转换为0。(1+l，2=0)

## 位置方法（不改变字符串）
接受两个参数

- value 要查找的子字符串
- startIndex 查找起点的索引（`endWith`的所针对的是前`n`个字符）

### es5

#### indexOf(str,startIndex=0)

作用：**从头到尾**从字符串中查找子字符串。

#### lastIndexOf(str,startIndex=this.length-1)

作用：**从尾到头**从字符串中查找子字符串。



返回：都为子字符串的开始索引，没有找到返回-1

```js
var a = 'loblo'
a.indexOf('lo')
//0
a.lastIndexOf('lo')
//3
```
### es6

#### includes(str,startIndex=0)

返回：布尔值，表示是否找到了参数字符串

#### startWith(str,startIndex=0)

返回：布尔值，表示参数字符串是否在原字符串的头部

#### endWith(str)

返回：布尔值，表示参数字符串是否在原字符串的尾部

```js
let s = 'Hello world!';

s.startsWith('world', 6) // true
s.endsWith('Hello', 5) // true
s.includes('Hello', 6) // false
```



## trim方法(不改变字符串)

### trim()

作用：创建一个字符串的副本，删除前置以及后缀的所有空格（\n，\t也能删除）

返回：返回字符串副本。

```js
var a = '   sdasad ds '
var b = a.trim()
a
//"   sdasad ds "
b
//"sdasad ds"
```

### trimLeft()
只消除头部的空格
### trimRight()
只消除尾部空格

> `trimLeft()`是`trimStart()`的别名，`trimRight()`是`trimEnd()`的别名。字符串大小写转换方法(不改变字符串)

上述三个方法除了空格键，对字符串头部（或尾部）的 tab 键、换行符等不可见的空白符号也有效。

### toLocaleUpperCase(str)

本地方法

### toUpperCase(str)

作用：把字符串转换为大写

返回值：大写的字符串

### toLocaleLowerCase(str)

本地方法

### toLowerCase(str)

作用：把字符串转换为小

返回值：小写的字符串

>一般来说，在不知道自己的代码将要在哪种语言环境中运行的情况下，还是使用针对地区的方法更为稳妥一些。

## 模式匹配方法(不改变字符串)
### es5
#### match(reg)

接受一个参数，正则表达式或RegExp对象。

作用：查找字符串中匹配正则表达式的子串。

返回：

- 正则表达式非全局匹配

一个数组，第一项是与整个模式匹配的字符串，之后的每一项保存着与正则表达式中捕获组匹配的字符串。如果没有匹配到则返回null。

- 正则表达式为全局匹配

一个数组，里面为**从头到尾**依次与整个模式匹配的字符串

#### search(reg)

接受一个参数，正则表达式或RegExp对象。

作用：查找字符串中匹配正则表达式的第一个子串的索引。

返回：字符串中第一个匹配项的索引，如果没有返回-1。

```js
var test = 'cat, bat, sat , fat'
var pattern = /.(at)/
var matches = test.match(pattern)
matches
//["cat", "at", index: 0, input: "cat, bat, sat , fat", groups: undefined]

//matches.index 第一次匹配到子串的开始索引
//matches.input 进行匹配的字符串值

//当全局匹配的时候，matches就没有属性值了
var test = 'cat, bat, sat , fat'
var pattern = /.(at)/g
var matches = test.match(pattern)
matches
//(4) ["cat", "bat", "sat", "fat"]

var index = test.search(pattern)//0

```

> 注意：match和search中输入的值都会被强制转换为正则表达式

#### <font color='red'>replace(reg/str,str/fn)</font>

接受两个参数

- reg/str：RegExp对象或一个字符串（这个字符串不会被转换成正则表达式）
- str/fn：一个字符串或函数


如果想替换掉所有子字符串，唯一的办法就是第一个参数（1）提供一个正则表达式（2）指定全局(g)标志

作用：替换字字符串

返回值：被替换后的字符串

```js
var test = 'cat, bat, sat , fat'
var pattern = /(a)t/g
var testReplace = test.replace(pattern,'d');
testReplace
//"cd, bd, sd , fd"
```

`$n`可以使用最近一次匹配结果中第n个捕获组的内容(n=0~9)

```js
var test = 'caz, bas, saw , fat'
var pattern = /(.)(a)(.)/g
var matches = test.replace(pattern,"$1$3")
matches
"cz, bs, sw , ft"
```

当第二个参数是函数时，如果是全局匹配，有多少个匹配项，就会调用多少次函数

向这个函数传递四个参数：

- 匹配项
- 第1~n个捕获组的匹配项（在正则表达式定义了多个捕获组的情况下）
- 匹配项索引
- 原始字符串

```js
var test = 'caz, bas, saw'
var pattern = /(.)(a)(.)/g
var rep = test.replace(pattern,function(){
	console.log(arguments)
})
VM31586:2 Arguments(6) ["caz", "c", "a", "z", 0, "caz, bas, saw"]
VM31586:2 Arguments(6) ["bas", "b", "a", "s", 5, "caz, bas, saw"]
VM31586:2 Arguments(6) ["saw", "s", "a", "w", 10, "caz, bas, saw"]
```

#### split(str/reg，count)

- str/reg：用来分割字符串的分隔符
- count：用于指定返回数组的长度，如果数组过长截取前面count长元素。

作用：基于指定的分隔符**将一个字符串分割成多个子字符串**，并将结果放在一个**数组**中

返回：返回被修改的数组

```js
var test = 'caz, bas, saw'
var arr1 = test.split(',');
var arr2 = test.split(',',2);
arr1;//["caz", " bas", " saw"]
arr2;// ["caz", " bas"]
```

### es6

#### matchAll

作用：可以一次性取出所有匹配

返回：<font color="red">一个遍历器，不是数组</font>

```javascript
for(let item of b.matchAll(a)){
	console.log(item)
}
VM1345:2 ["sddsa", index: 0, input: "sddsasddsbsddsc", groups: undefined]
VM1345:2 ["sddsb", index: 5, input: "sddsasddsbsddsc", groups: undefined]
VM1345:2 ["sddsc", index: 10, input: "sddsasddsbsddsc", groups: undefined]
```

相对于返回数组，返回遍历器的**好处在于**，如果匹配结果是一个很大的数组，那么**遍历器比较节省资源**。

遍历器转为数组是非常简单的，使用`...`运算符和`Array.from`方法就可以了。

```javascript
// 转为数组方法一
[...string.matchAll(regex)]

// 转为数组方法二
Array.from(string.matchAll(regex));
```

## 比较方法

### localeCompare(str)

作用：比较两个字符串

返回值：

- 字符串在字母表中应该排在字符串参数前，返回一个负数（大多数情况下是-1，具体的值要视实现而定)
- 如果字符串等于字符串

## 静态方法
定义在`String`对象上

作用：接受一或多个 Unicode 码点，返回对应字符

### es5
#### fromCharCode(c1,c2)

这个方法不能识别码点大于`0xFFFF`的字符

### es6
#### fromCodePoint()
作用：可以识别码点大于`0xFFFF`的字符
```js
//fromCharCode(c1, c2,...)
console.log(String.fromCharCode(97,98,99,120,121,122))
//output: abcxyz
console.log(String.fromCharCode(72,69,76,76,79))
//output: HELLO
```

但是它不能识别码点大于`oxFFFF`的字符，溢出会舍弃最高位。`0x20BB7`就发生了溢出，最高位`2`被舍弃了，最后返回码点`U+0BB7`对应的字符。

#### row()

## HTML方法

`anchor(name)`，`big()`,`small()`,`fontcolor(color)`,`fontsize(size)`，少用，因为他们创建的标签无法表达语义。

```js
var a = String.prototype.anchor('dd')
console.log(a)
//<a name="dd"></a>
```

