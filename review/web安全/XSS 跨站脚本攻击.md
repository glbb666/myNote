### 什么是 `XSS `攻击？

`XSS` 攻击就是`跨站脚本`攻击，`XSS` 攻击是指浏览器中执行恶意脚本(**无论是跨域还是同域**)，从而拿到用户的信息并进行操作。

这些操作一般可以完成下面这些事情:

1. 窃取`Cookie`。
2. 监听用户行为，比如输入账号密码后直接发送到黑客服务器。
3. 修改 `DOM` 伪造登录表单。
4. 在页面中生成浮窗广告。

通常情况，`XSS` 攻击的实现有三种方式——**存储型**、**反射型**和**文档型**。

#### 存储型

`存储型的 XSS` 将脚本存储到了服务端的数据库，然后在客户端执行这些脚本，从而达到攻击的效果。

常见的场景：留言评论区提交一段脚本代码，如果前后端没有做好转义的工作，那评论内容存到了数据库，在**页面渲染过程中直接执行**。

#### 反射型

`反射型的 XSS`指的是恶意脚本作为**网络请求的一部分**发送给服务器，服务器把内容返回给浏览器，浏览器把恶意脚本当作`html`的一部分来解析，直接执行，然后被攻击。

比如我输入:

```
http://sanyuan.com?q=<script>alert("你完蛋了")</script>
```

#### 文档型

文档型的 `XSS` 攻击并不会经过服务端，而是作为中间人的角色，在数据传输过程劫持到网络数据包，然后**修改里面的` html `文档**！

这样的劫持方式包括`WIFI路由器劫持`或者`本地恶意软件`等。

#### 利用 CSP

`CSP`，即浏览器中的内容安全策略，它的核心思想就是**服务器决定浏览器加载哪些资源**，具体来说可以完成以下功能:

1. 限制下载其他域的资源。
2. 禁止向其它域提交数据。
3. 提供上报机制，能帮助我们及时发现 `XSS `攻击。

### 总结

`XSS` 攻击是指浏览器中执行恶意脚本, 然后拿到用户的信息进行操作。主要分为`存储型`、`反射型`和`文档型`。防范的措施包括:

- 一个信念: 不要相信用户的输入，对输入内容转码或者过滤（过滤`<script>`标签），让其不可执行。
- 两个利用: 利用 `CSP`，利用 `Cookie` 的 `HttpOnly `属性避免`cookie`被窃取。

