# ç®­å¤´å‡½æ•°

## åŸºæœ¬ç”¨æ³•

ES6 å…è®¸ä½¿ç”¨â€œç®­å¤´â€ï¼ˆ`=>`ï¼‰å®šä¹‰å‡½æ•°ã€‚

```javascript
var f = v => v;

// ç­‰åŒäºŽ
var f = function (v) {
  return v;
};
```

å¦‚æžœç®­å¤´å‡½æ•°**ä¸éœ€è¦å‚æ•°æˆ–éœ€è¦å¤šä¸ªå‚æ•°**ï¼Œå°±ä½¿ç”¨ä¸€ä¸ªåœ†æ‹¬å·ä»£è¡¨å‚æ•°éƒ¨åˆ†ã€‚

```javascript
var f = () => 5;
// ç­‰åŒäºŽ
var f = function () { return 5 };

var sum = (num1, num2) => num1 + num2;
// ç­‰åŒäºŽ
var sum = function(num1, num2){
  return num1 + num2;
};
```

å¦‚æžœç®­å¤´å‡½æ•°çš„ä»£ç å—éƒ¨åˆ†å¤šäºŽä¸€æ¡è¯­å¥ï¼Œå°±è¦ä½¿ç”¨å¤§æ‹¬å·å°†å®ƒä»¬æ‹¬èµ·æ¥ï¼Œå¹¶ä¸”ä½¿ç”¨`return`è¯­å¥è¿”å›žã€‚

```javascript
var sum = (num1, num2) => { return num1 + num2; }
```

ç”±äºŽå¤§æ‹¬å·è¢«è§£é‡Šä¸ºä»£ç å—ï¼Œæ‰€ä»¥å¦‚æžœç®­å¤´å‡½æ•°ç›´æŽ¥è¿”å›žä¸€ä¸ªå¯¹è±¡ï¼Œå¿…é¡»åœ¨å¯¹è±¡å¤–é¢åŠ ä¸Šæ‹¬å·ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚

```javascript
// æŠ¥é”™
let getTempItem = id => { id: id, name: "Temp" };
// ä¸æŠ¥é”™
let getTempItem = id => ({ id: id, name: "Temp" });
```

ä¸‹é¢æ˜¯ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œè™½ç„¶å¯ä»¥è¿è¡Œï¼Œä½†ä¼šå¾—åˆ°é”™è¯¯çš„ç»“æžœã€‚

```javascript
let foo = () => { a: 1 };
foo() // undefined
```

ä¸Šé¢ä»£ç ä¸­ï¼ŒåŽŸå§‹æ„å›¾æ˜¯è¿”å›žä¸€ä¸ªå¯¹è±¡`{ a: 1 }`ï¼Œä½†æ˜¯ç”±äºŽå¼•æ“Žè®¤ä¸ºå¤§æ‹¬å·æ˜¯ä»£ç å—ï¼Œæ‰€ä»¥æ‰§è¡Œäº†ä¸€è¡Œè¯­å¥`a: 1`ã€‚è¿™æ—¶ï¼Œ`a`å¯ä»¥è¢«è§£é‡Šä¸ºè¯­å¥çš„æ ‡ç­¾ï¼Œå› æ­¤å®žé™…æ‰§è¡Œçš„è¯­å¥æ˜¯`1;`ï¼Œç„¶åŽå‡½æ•°å°±ç»“æŸäº†ï¼Œæ²¡æœ‰è¿”å›žå€¼ã€‚

å¦‚æžœç®­å¤´å‡½æ•°åªæœ‰ä¸€è¡Œè¯­å¥ï¼Œä¸”ä¸éœ€è¦è¿”å›žå€¼ï¼Œå¯ä»¥é‡‡ç”¨ä¸‹é¢çš„å†™æ³•ï¼Œå°±ä¸ç”¨å†™å¤§æ‹¬å·äº†ã€‚

```
let fn = () => void è¦æ‰§è¡Œçš„è¯­å¥
```

ä¾‹å¦‚

```javascript
let fn = () => void console.log('ok')
ok
undefined
```

ç®­å¤´å‡½æ•°å¯ä»¥ä¸Žå˜é‡è§£æž„ç»“åˆä½¿ç”¨ã€‚

```javascript
const full = ({ first, last }) => first + ' ' + last;

// ç­‰åŒäºŽ
function full(person) {
  return person.first + ' ' + person.last;
}
```

ðŸ’¥æ³¨æ„ï¼š

ï¼ˆ1ï¼‰å‡½æ•°ä½“å†…çš„`this`å¯¹è±¡ï¼Œå°±æ˜¯å®šä¹‰æ—¶æ‰€åœ¨çš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯ä½¿ç”¨æ—¶æ‰€åœ¨çš„å¯¹è±¡ï¼Œå› ä¸ºç®­å¤´å‡½æ•°é‡Œé¢æ ¹æœ¬æ²¡æœ‰è‡ªå·±çš„`this`ï¼Œè€Œæ˜¯å¼•ç”¨å¤–å±‚çš„`this`ã€‚

ï¼ˆ2ï¼‰ä¸å¯ä»¥å½“ä½œæž„é€ å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸å¯ä»¥ä½¿ç”¨`new`å‘½ä»¤ï¼Œå¦åˆ™ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚

ï¼ˆ3ï¼‰ä¸å¯ä»¥ä½¿ç”¨`arguments`å¯¹è±¡ï¼Œè¯¥å¯¹è±¡åœ¨å‡½æ•°ä½“å†…ä¸å­˜åœ¨ã€‚å¦‚æžœè¦ç”¨ï¼Œå¯ä»¥ç”¨ rest å‚æ•°ä»£æ›¿ã€‚

ï¼ˆ4ï¼‰ä¸å¯ä»¥ä½¿ç”¨`yield`å‘½ä»¤ï¼Œå› æ­¤ç®­å¤´å‡½æ•°ä¸èƒ½ç”¨ä½œ Generator å‡½æ•°ã€‚

é™¤äº†`this`ï¼Œä»¥ä¸‹ä¸‰ä¸ªå˜é‡åœ¨ç®­å¤´å‡½æ•°ä¹‹ä¸­ä¹Ÿæ˜¯ä¸å­˜åœ¨çš„ï¼ŒæŒ‡å‘å¤–å±‚å‡½æ•°çš„å¯¹åº”å˜é‡ï¼š`arguments`ã€`super`ã€`new.target`ã€‚

## ä¸é€‚ç”¨åœºåˆ

ç”±äºŽç®­å¤´å‡½æ•°ä½¿å¾—`this`ä»Žâ€œåŠ¨æ€â€å˜æˆâ€œé™æ€â€ï¼Œä¸‹é¢ä¸¤ä¸ªåœºåˆä¸åº”è¯¥ä½¿ç”¨ç®­å¤´å‡½æ•°ã€‚

ç¬¬ä¸€ä¸ªåœºåˆæ˜¯å®šä¹‰å¯¹è±¡çš„æ–¹æ³•ï¼Œä¸”è¯¥æ–¹æ³•å†…éƒ¨åŒ…æ‹¬`this`ã€‚

```javascript
const cat = {
  lives: 9,
  jumps: () => {
    this.lives--;
  }
}
```

ç¬¬äºŒä¸ªåœºåˆæ˜¯éœ€è¦åŠ¨æ€`this`çš„æ—¶å€™ï¼Œä¹Ÿä¸åº”ä½¿ç”¨ç®­å¤´å‡½æ•°ã€‚

```javascript
var button = document.getElementById('press');
button.addEventListener('click', () => {
  this.classList.toggle('on');
});
```

## åµŒå¥—çš„ç®­å¤´å‡½æ•°

ä¸‹é¢æ˜¯ä¸€ä¸ªéƒ¨ç½²ç®¡é“æœºåˆ¶ï¼ˆpipelineï¼‰çš„ä¾‹å­ï¼Œå³å‰ä¸€ä¸ªå‡½æ•°çš„è¾“å‡ºæ˜¯åŽä¸€ä¸ªå‡½æ•°çš„è¾“å…¥ã€‚

```javascript
const pipeline = (...funcs) =>
  val => funcs.reduce((a, b) => b(a), val);

const plus1 = a => a + 1;
const mult2 = a => a * 2;
const addThenMult = pipeline(plus1, mult2);

addThenMult(5)
// 12
//pipelineæ˜¯ä¸€ä¸ªå‡½æ•°,ä»–æŽ¥å—ä¸¤ä¸ªå‚æ•°(plus1,mult2),è¿”å›žval
//addThenMultæ˜¯ä¸€ä¸ªå‡½æ•°,ä»–æŽ¥å—ä¸€ä¸ªå‚æ•°,è¿™ä¸ªå‚æ•°çš„å€¼åˆå¯ä½œä¸ºpipelineçš„è¿”å›žå€¼
//åœ¨addThenMultä¸­æ‰§è¡Œfuncs,å› ä¸ºä¼ å…¥äº†val,a = val,b = plus1,æ‰§è¡Œplus1(a),è¿”å›žå€¼ä¸º5+1 = 6,æŽ¥ç€ a = 6,b = mult2,æ‰§è¡Œmult2,è¿”å›žå€¼ä¸º12
```

å¦‚æžœè§‰å¾—ä¸Šé¢çš„å†™æ³•å¯è¯»æ€§æ¯”è¾ƒå·®ï¼Œä¹Ÿå¯ä»¥é‡‡ç”¨ä¸‹é¢çš„å†™æ³•ã€‚

```javascript
const plus1 = a => a + 1;
const mult2 = a => a * 2;

mult2(plus1(5))
// 12
```