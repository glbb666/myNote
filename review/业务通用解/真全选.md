### 背景

当用户的数据过多，分页的时候无法全部拉完。但是用户又想进行“真全选"，而不是仅对当前拉到的数据进行操作的一种解法。

### 做法

- dataArray：端的数据列表
- checkAllFlag：真全选标识，默认为false
- selectArray：已选择列表，默认为[]
- unSelectArray：未选择列表，默认为[]
- selectDicArray：已选择目录列表，默认为[]
- unSelectDicArray：未选择目录列表，默认为[]

### 真全选定义

当用户点击全选按钮的时候，进入真全选状态。

当用户点击取消全选按钮的时候，退出真全选状态。

### 显示UI

#### 全选按钮

##### 与真全选的关系

全选按钮显示并不是一一对应的关系。具体的关系参考"选中状态的条件"

##### 不同状态的显示

未被选中状态：显示全选

被选中状态：显示取消全选

##### 选中状态的条件

- 真全选标识  === true
  - 目录反选列表没有值
  - 资源反选列表里没有值
- 真全选标识 === false
  - 当前端的全部资源项被选中
  - 当前端的全部目录项被选中
  - 资源反选列表没有值（目录中取消的项会被放入资源反选列表）

#### 列表（带是否选中的按钮）

### 用户行为及其对数据的影响

#### 非真全选状态

- 如果用户选择资源，资源进入selectArray。
- 如果用户选择了目录，目录进入selectDicArray。
- 如果用户手动选中（一个一个选）了当前端的所有资源和目录，会选中全选按钮，但是不会置真全选标识为true。

  - 在这种情况下，如果用户下拉从服务那边拉取了更多数据，全选按钮会被取消。因为已经不满足所有项都被选中的条件。
  - 在这种情况下，如果用户取消了其中一项资源，那么就会从selectArray中删除该项目，同时取消全选按钮的选中状态，理由同上。
  - 在这种情况下，如果用户取消了其中一个目录，那么就会从selectDicArray中删除该项目，同时取消全选按钮的选中状态，理由同上。
  - 在这种情况下，如果用户取消了其中一个目录的某一个资源，那么这个资源会进入unSelectArray，同时取消全选按钮的选中状态，理由同上。
  - 在这种情况下，如果用户点击取消全选，会清除selectArray，selectDicArray，unSelectArray。

#### 真全选状态

- 如果用户点击全选按钮，真全选会置为true。此刻会清空selectArray，selectDicArray，unSelectArray。
- 如果用户取消了资源，用户取消的值就会进入unSelectArray，同时取消全选按钮的选中状态。
  - 如果用户再把这一项选中，unSelectArray会把资源移除。
- 如果用户取消了目录，用户取消的值就会进入unSelectDicArray，同时取消全选按钮的选中状态。
  - 如果用户再把这一目录选中，unSelectDicArray会把目录移除。
- 如果用户取消了目录中的某一资源，用户取消的资源会进入unSelectArray，同时取消全选按钮的选中状态。
- 真全选状态下，如果用户下拉更多，从服务那边拉取过来的值会被置为选中状态。
  - ⚠️注意：在unSelectArray或者unSelectDicArray不为空的情况下，因为依然是真全选状态，从服务那边拉取过来的值会被置为选中状态。
- 当用户点击取消全选按钮，真全选会置为false。此刻会清空unSelectArray和unSelectDicArray。
